import { ApolloShell } from '@/components/ui/shell';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert';
import { CheckCircle2 } from 'lucide-react';

# Shell

Provides UiPath authentication and renders children only when authenticated.

<div className="p-4 border rounded-lg mt-4">
  <div className="text-sm text-muted-foreground mb-4">
    The Apollo Shell component wraps your application and handles UiPath authentication. Children
    are only rendered when the user is authenticated.
  </div>
  <div className="space-y-4">
    <Alert>
      <CheckCircle2 className="h-4 w-4" />
      <AlertTitle>Example: Protected Content</AlertTitle>
      <AlertDescription>
        This demonstrates the structure of content protected by Apollo Shell. In a real application,
        this content would only be visible after successful authentication.
      </AlertDescription>
    </Alert>
    <Card>
      <CardHeader>
        <CardTitle>Welcome to Apollo Shell</CardTitle>
        <CardDescription>This content is protected by Apollo Shell authentication.</CardDescription>
      </CardHeader>
      <CardContent>
        <p className="text-sm text-muted-foreground">
          The Apollo Shell component wraps your application and ensures only authenticated users can
          access the content.
        </p>
      </CardContent>
    </Card>
  </div>
</div>

## Installation

```bash
npx shadcn@latest add https://apollo-vertex.vercel.app/r/shell.json
```

## Usage

```tsx
import { ApolloShell } from '@/components/ui/shell';
```

```tsx
import { ApolloShell } from '@/components/ui/shell';
import { onCallback, type AuthConfiguration } from '@uipath/auth-react';
import { useNavigate } from '@tanstack/react-router';

function App() {
  const navigate = useNavigate();

  const configuration: AuthConfiguration = {
    authority: 'https://your-org.cloud.uipath.com/identity_',
    redirect_uri: 'http://localhost:3000/auth_callback',
    post_logout_redirect_uri: 'http://localhost:3000',
  };

  return (
    <ApolloShell
      configuration={configuration}
      companyName="Your Company"
      productName="Your Product"
      onSigninCallback={(user) => {
        onCallback(user, (to) => {
          navigate({ to: to });
        });
      }}
    >
      {/* ... your authenticated app content ... */}
      <YourApp />
    </ApolloShell>
  );
}
```

## Animations

The Shell component uses **framer-motion** for smooth, spring-based animations. Custom easing functions are defined as CSS variables for consistent motion throughout the application.

### Custom Easing Functions

The following custom easing functions are available via CSS variables in `globals.css`:

#### ease-out (Elements entering or exiting / user interactions)

```css
--ease-out-quad: cubic-bezier(0.25, 0.46, 0.45, 0.94);
--ease-out-cubic: cubic-bezier(0.215, 0.61, 0.355, 1);
--ease-out-quart: cubic-bezier(0.165, 0.84, 0.44, 1);
--ease-out-quint: cubic-bezier(0.23, 1, 0.32, 1);
--ease-out-expo: cubic-bezier(0.19, 1, 0.22, 1);
--ease-out-circ: cubic-bezier(0.075, 0.82, 0.165, 1);
```

#### ease-in-out (Elements moving within the screen)

```css
--ease-in-out-quad: cubic-bezier(0.455, 0.03, 0.515, 0.955);
--ease-in-out-cubic: cubic-bezier(0.645, 0.045, 0.355, 1);
--ease-in-out-quart: cubic-bezier(0.77, 0, 0.175, 1);
--ease-in-out-quint: cubic-bezier(0.86, 0, 0.07, 1);
--ease-in-out-expo: cubic-bezier(1, 0, 0, 1);
--ease-in-out-circ: cubic-bezier(0.785, 0.135, 0.15, 0.86);
```

### Spring Animation Example

The sidebar uses spring animations for natural, responsive motion:

```tsx
<motion.aside
  animate={{ width: isCollapsed ? 48 : 264 }}
  transition={{
    type: "spring",
    stiffness: 400,  // How "tight" the spring is
    damping: 30,     // How much resistance/friction
    mass: 0.8,       // Weight of the element
  }}
>
  {/* ... sidebar content ... */}
</motion.aside>
```

### Using Custom Easing in Tailwind

You can reference the custom easing functions in Tailwind classes:

```tsx
<div className="transition-all duration-300 [transition-timing-function:var(--ease-out-quart)]">
  Smooth animation
</div>
```

### Animation Best Practices

- **Use spring animations** for natural feel (avoid bouncy springs unless using drag gestures)
- **Animate**: `opacity`, `transform` (hardware accelerated)
- **Avoid**: Animating `width`, `height`, `top`, `left` directly
- **Performance**: Use `will-change` sparingly, only for `transform`, `opacity`, `filter`
- **Duration**: Keep animations fast (< 1s) for responsive UI feel
- **Origin-aware**: Animate from the trigger (e.g., dropdowns animate from button)
