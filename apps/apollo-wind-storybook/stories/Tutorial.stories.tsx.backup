/**
 * Tutorial Stories - Step-by-Step Guide to Apollo Wind
 *
 * This file demonstrates how to use Apollo Wind utilities through a progressive
 * tutorial that builds a registration form. Each story explains key concepts
 * and shows how Apollo Design System tokens map to Tailwind utilities.
 */

import type { Meta, StoryObj } from '@storybook/react';
import React from 'react';
import '../src/theme.css';
import '../src/components.css';

// Theme Switcher Component
const ThemeSwitcher: React.FC = () => {
  const [theme, setTheme] = React.useState<'light' | 'dark' | 'high-contrast'>('light');

  React.useEffect(() => {
    // Apply theme to body element (Storybook iframe context)
    document.body.setAttribute('data-theme', theme);
  }, [theme]);

  return (
    <div className="flex gap-2 mb-6">
      <button
        onClick={() => setTheme('light')}
        className={`btn btn-small ${theme === 'light' ? 'btn-primary-colors' : ''}`}
      >
        Light
      </button>
      <button
        onClick={() => setTheme('dark')}
        className={`btn btn-small ${theme === 'dark' ? 'btn-primary-colors' : ''}`}
      >
        Dark
      </button>
      <button
        onClick={() => setTheme('high-contrast')}
        className={`btn btn-small ${theme === 'high-contrast' ? 'btn-primary-colors' : ''}`}
      >
        High Contrast
      </button>
    </div>
  );
};

const meta: Meta = {
  title: 'Tutorial/Building a Registration Form',
  parameters: {
    layout: 'fullscreen',
    docs: {
      description: {
        component: 'Learn Apollo Wind by building a registration form step by step. Each story explains how Apollo Design System tokens map to Tailwind utilities.',
      },
    },
  },
};

export default meta;
type Story = StoryObj;

// ============================================================================
// Story 1: Preview - The Final Result
// ============================================================================

export const Story1_Preview: Story = {
  name: '1. Preview - What We\'ll Build',
  render: () => (
    <div className="bg-surface min-h-screen p-8">
      <ThemeSwitcher />

      <div className="max-w-2xl mx-auto">
        <div className="text-foreground mb-6">
          <h2 className="text-h2 text-foreground-emp mb-2">Tutorial Preview</h2>
          <p className="text-l text-foreground-de-emp">
            This is the final registration form we'll build together. In the following stories,
            we'll break down each component and explain how Apollo Wind utilities work.
          </p>
        </div>

        {/* Final Form */}
        <div className="card card-elevated p-6 max-w-md mx-auto">
          <div className="mb-6">
            <h2 className="text-foreground-emp text-h3 mb-1">
              Create Account
            </h2>
            <p className="text-foreground-de-emp text-s">
              Join thousands of users worldwide
            </p>
          </div>

          <form>
            {/* Full Name */}
            <div className="mb-4">
              <label className="block text-foreground-emp text-s mb-1" htmlFor="preview-fullName">
                Full Name
              </label>
              <div className="relative">
                <svg className="icon-sm text-foreground-de-emp absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                </svg>
                <input
                  type="text"
                  id="preview-fullName"
                  className="input pl-10"
                  placeholder="Enter your full name"
                />
              </div>
            </div>

            {/* Email */}
            <div className="mb-4">
              <label className="block text-foreground-emp text-s mb-1" htmlFor="preview-email">
                Email
              </label>
              <div className="relative">
                <svg className="icon-sm text-foreground-de-emp absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <path d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" strokeWidth="2"/>
                </svg>
                <input
                  type="email"
                  id="preview-email"
                  className="input pl-10"
                  placeholder="Enter your email"
                />
              </div>
            </div>

            {/* Password */}
            <div className="mb-4">
              <label className="block text-foreground-emp text-s mb-1" htmlFor="preview-password">
                Password
              </label>
              <div className="relative">
                <svg className="icon-sm text-foreground-de-emp absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <rect x="3" y="11" width="18" height="11" rx="2" ry="2" strokeWidth="2"/>
                  <path d="M7 11V7a5 5 0 0110 0v4" strokeWidth="2"/>
                </svg>
                <input
                  type="password"
                  id="preview-password"
                  className="input pl-10"
                  placeholder="Enter your password"
                />
              </div>
            </div>

            {/* Submit Button */}
            <button type="submit" className="btn btn-primary-colors w-full">
              Create Account
            </button>
          </form>
        </div>

        <div className="text-foreground mt-8 p-4 bg-surface-raised rounded">
          <h3 className="text-l text-foreground-emp mb-2">What You'll Learn</h3>
          <ul className="text-m text-foreground-de-emp space-y-1 list-disc list-inside">
            <li>How Apollo Design System tokens map to Tailwind utilities</li>
            <li>Component utilities like <code className="text-primary">card</code>, <code className="text-primary">btn</code>, and <code className="text-primary">input</code></li>
            <li>Spacing system: <code className="text-primary">p-6</code> uses Apollo tokens, not Tailwind defaults</li>
            <li>Typography shortcuts: <code className="text-primary">text-h3</code>, <code className="text-primary">text-m</code>, <code className="text-primary">text-s</code></li>
            <li>Semantic colors: <code className="text-primary">text-foreground-emp</code>, <code className="text-primary">bg-surface</code></li>
            <li>Form validation states and status colors</li>
          </ul>
        </div>
      </div>
    </div>
  ),
};

// ============================================================================
// Story 2: Card & Spacing
// ============================================================================

export const Story2_CardAndSpacing: Story = {
  name: '2. Card & Spacing - Component Utilities',
  render: () => (
    <div className="bg-surface min-h-screen p-8">
      <ThemeSwitcher />

      <div className="max-w-4xl mx-auto">
        <div className="text-foreground mb-6">
          <h2 className="text-h2 text-foreground-emp mb-2">Understanding Card & Spacing</h2>
          <p className="text-l text-foreground-de-emp">
            Learn how component utilities work and how Apollo tokens map to Tailwind spacing utilities.
          </p>
        </div>

        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
          {/* Left: Demo */}
          <div>
            <h3 className="text-h3 text-foreground-emp mb-4">Demo</h3>

            {/* Card Examples */}
            <div className="card p-6 mb-4">
              <h4 className="text-l text-foreground-emp mb-2">Basic Card</h4>
              <p className="text-m text-foreground-de-emp">
                Uses <code className="text-primary">card</code> utility with <code className="text-primary">p-6</code> padding.
              </p>
            </div>

            <div className="card card-elevated p-6 mb-4">
              <h4 className="text-l text-foreground-emp mb-2">Elevated Card</h4>
              <p className="text-m text-foreground-de-emp">
                Uses <code className="text-primary">card-elevated</code> for shadow effect.
              </p>
            </div>

            {/* Spacing Examples */}
            <div className="bg-surface-raised p-4 rounded">
              <h4 className="text-l text-foreground-emp mb-3">Spacing Comparison</h4>

              <div className="space-y-3">
                <div className="bg-primary-100 p-2 rounded">
                  <code className="text-m text-foreground">p-2</code> → 8px (spacing-xs)
                </div>
                <div className="bg-primary-200 p-4 rounded">
                  <code className="text-m text-foreground">p-4</code> → 16px (spacing-base)
                </div>
                <div className="bg-primary-300 p-6 rounded">
                  <code className="text-m text-foreground">p-6</code> → 24px (spacing-l)
                </div>
              </div>
            </div>

            {/* Code Snippets */}
            <div className="mt-6 bg-surface-raised p-4 rounded">
              <h4 className="text-l text-foreground-emp mb-3">Code Examples</h4>
              <div className="space-y-3">
                <div>
                  <p className="text-m text-foreground-de-emp mb-1">Basic Card:</p>
                  <pre className="bg-surface p-3 rounded text-sm overflow-x-auto">
{`<div class="card p-6">
  <h4>Basic Card</h4>
  <p>Content here...</p>
</div>`}</pre>
                </div>
                <div>
                  <p className="text-m text-foreground-de-emp mb-1">Elevated Card:</p>
                  <pre className="bg-surface p-3 rounded text-sm overflow-x-auto">
{`<div class="card card-elevated p-6">
  <h4>Elevated Card</h4>
  <p>Content with shadow...</p>
</div>`}</pre>
                </div>
              </div>
            </div>
          </div>

          {/* Right: Explanation */}
          <div className="bg-surface-raised p-6 rounded">
            <h3 className="text-h3 text-foreground-emp mb-4">How It Works</h3>

            <div className="space-y-6 text-foreground">
              {/* Card Utility */}
              <div>
                <h4 className="text-l text-foreground-emp mb-2">1. Component Utilities</h4>
                <p className="text-m text-foreground-de-emp mb-2">
                  <code className="text-primary">card</code> is a <strong>component utility</strong> from Apollo Wind,
                  added via Tailwind plugin. It sets multiple properties at once:
                </p>
                <pre className="bg-surface p-3 rounded text-sm overflow-x-auto">
{`@utility card {
  background: var(--color-background);
  border: 1px solid var(--color-border);
  border-radius: 3px;
}`}</pre>
                <p className="text-m text-foreground-de-emp mt-2">
                  <code className="text-primary">card-elevated</code> adds shadow on top of <code className="text-primary">card</code>.
                </p>
              </div>

              {/* Spacing Mapping */}
              <div>
                <h4 className="text-l text-foreground-emp mb-2">2. Spacing Token Mapping</h4>
                <p className="text-m text-foreground-de-emp mb-3">
                  When you write <code className="text-primary">p-6</code>, here's what happens:
                </p>

                <div className="bg-surface p-4 rounded space-y-2 text-sm">
                  <div className="flex items-center gap-2">
                    <span className="text-primary font-semibold">Step 1:</span>
                    <span className="text-foreground-de-emp">Developer writes</span>
                    <code className="text-primary bg-surface-raised px-2 py-1 rounded">p-6</code>
                  </div>

                  <div className="flex items-center gap-2">
                    <span className="text-primary font-semibold">Step 2:</span>
                    <span className="text-foreground-de-emp">Tailwind looks up</span>
                    <code className="text-primary bg-surface-raised px-2 py-1 rounded">--spacing-6</code>
                  </div>

                  <div className="flex items-center gap-2">
                    <span className="text-primary font-semibold">Step 3:</span>
                    <span className="text-foreground-de-emp">Apollo Wind maps to</span>
                    <code className="text-primary bg-surface-raised px-2 py-1 rounded">var(--spacing-l)</code>
                  </div>

                  <div className="flex items-center gap-2">
                    <span className="text-primary font-semibold">Step 4:</span>
                    <span className="text-foreground-de-emp">Apollo Core resolves to</span>
                    <code className="text-primary bg-surface-raised px-2 py-1 rounded">24px</code>
                  </div>
                </div>
              </div>

              {/* Key Insight */}
              <div className="bg-info p-4 rounded border-l-4 border-info-600">
                <p className="text-m text-foreground-emp mb-1"><strong>Key Insight</strong></p>
                <p className="text-m text-foreground-de-emp">
                  You're NOT using Tailwind's default spacing! <code className="text-primary">p-6</code> uses
                  Apollo's <code className="text-primary">--spacing-l</code> token (24px), ensuring consistency
                  across all UiPath products.
                </p>
              </div>

              {/* Apollo Token Mapping Table */}
              <div>
                <h4 className="text-l text-foreground-emp mb-2">Apollo Spacing Scale</h4>
                <div className="bg-surface p-3 rounded text-sm space-y-1">
                  <div className="grid grid-cols-3 gap-2 text-foreground-de-emp font-semibold pb-2 border-b border-border">
                    <span>Tailwind</span>
                    <span>Apollo Token</span>
                    <span>Value</span>
                  </div>
                  <div className="grid grid-cols-3 gap-2 text-foreground">
                    <code className="text-primary">p-2</code>
                    <code>spacing-xs</code>
                    <code>8px</code>
                  </div>
                  <div className="grid grid-cols-3 gap-2 text-foreground">
                    <code className="text-primary">p-4</code>
                    <code>spacing-base</code>
                    <code>16px</code>
                  </div>
                  <div className="grid grid-cols-3 gap-2 text-foreground">
                    <code className="text-primary">p-6</code>
                    <code>spacing-l</code>
                    <code>24px</code>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  ),
};

// ============================================================================
// Story 3: Typography
// ============================================================================

export const Story3_Typography: Story = {
  name: '3. Typography - Text Utilities',
  render: () => (
    <div className="bg-surface min-h-screen p-8">
      <ThemeSwitcher />

      <div className="max-w-4xl mx-auto">
        <div className="text-foreground mb-6">
          <h2 className="text-h2 text-foreground-emp mb-2">Understanding Typography</h2>
          <p className="text-m text-foreground-de-emp">
            Learn how Apollo typography shortcuts map to design system tokens.
          </p>
        </div>

        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
          {/* Left: Demo */}
          <div>
            <h3 className="text-h3 text-foreground-emp mb-4">Demo</h3>

            {/* Building the Card Header */}
            <div className="card card-elevated p-6">
              <div className="mb-6">
                <h2 className="text-foreground-emp text-h3 mb-1">
                  Create Account
                </h2>
                <p className="text-foreground-de-emp text-s">
                  Join thousands of users worldwide
                </p>
              </div>

              <div className="bg-surface-raised p-4 rounded">
                <p className="text-s text-foreground-de-emp">
                  This header uses Apollo typography shortcuts:<br/>
                  • <code className="text-primary">text-h3</code> for the heading<br/>
                  • <code className="text-primary">text-s</code> for the subtitle
                </p>
              </div>
            </div>

            {/* Typography Scale */}
            <div className="bg-surface-raised p-6 rounded mt-4">
              <h4 className="text-m text-foreground-emp mb-3">Typography Scale</h4>
              <div className="space-y-3">
                <div>
                  <span className="text-h1 text-foreground">text-h1</span>
                  <span className="text-xs text-foreground-de-emp ml-2">(36px / 44px)</span>
                </div>
                <div>
                  <span className="text-h2 text-foreground">text-h2</span>
                  <span className="text-xs text-foreground-de-emp ml-2">(28px / 36px)</span>
                </div>
                <div>
                  <span className="text-h3 text-foreground">text-h3</span>
                  <span className="text-xs text-foreground-de-emp ml-2">(24px / 32px)</span>
                </div>
                <div>
                  <span className="text-m text-foreground">text-m</span>
                  <span className="text-xs text-foreground-de-emp ml-2">(14px / 20px)</span>
                </div>
                <div>
                  <span className="text-s text-foreground">text-s</span>
                  <span className="text-xs text-foreground-de-emp ml-2">(12px / 16px)</span>
                </div>
              </div>
            </div>
          </div>

          {/* Right: Explanation */}
          <div className="bg-surface-raised p-6 rounded">
            <h3 className="text-h3 text-foreground-emp mb-4">How It Works</h3>

            <div className="space-y-6 text-foreground">
              {/* Typography Shortcuts */}
              <div>
                <h4 className="text-m text-foreground-emp mb-2">1. Typography Shortcuts</h4>
                <p className="text-s text-foreground-de-emp mb-2">
                  Apollo Wind provides <strong>composite typography utilities</strong> that set
                  multiple properties at once:
                </p>
                <pre className="bg-surface p-3 rounded text-xs overflow-x-auto">
{`@utility text-h3 {
  font-family: var(--font-family-base);
  font-size: 24px;
  line-height: 32px;
  font-weight: 600;
}`}</pre>
                <p className="text-s text-foreground-de-emp mt-2">
                  Instead of writing <code className="text-primary">text-2xl font-semibold leading-8</code>,
                  use <code className="text-primary">text-h3</code>!
                </p>
              </div>

              {/* Token Mapping */}
              <div>
                <h4 className="text-m text-foreground-emp mb-2">2. Apollo to Tailwind Mapping</h4>
                <p className="text-s text-foreground-de-emp mb-3">
                  Apollo typography tokens map to semantic utility names:
                </p>

                <div className="bg-surface p-4 rounded space-y-3 text-xs">
                  <div>
                    <div className="text-primary font-semibold mb-1">Headers (font-header-*)</div>
                    <div className="grid grid-cols-2 gap-2 text-foreground-de-emp">
                      <code>font-header-1</code>
                      <code className="text-primary">→ text-h1</code>
                    </div>
                    <div className="grid grid-cols-2 gap-2 text-foreground-de-emp">
                      <code>font-header-2</code>
                      <code className="text-primary">→ text-h2</code>
                    </div>
                    <div className="grid grid-cols-2 gap-2 text-foreground-de-emp">
                      <code>font-header-3</code>
                      <code className="text-primary">→ text-h3</code>
                    </div>
                  </div>

                  <div>
                    <div className="text-primary font-semibold mb-1">Body Text (font-*-size)</div>
                    <div className="grid grid-cols-2 gap-2 text-foreground-de-emp">
                      <code>font-l-size</code>
                      <code className="text-primary">→ text-l</code>
                    </div>
                    <div className="grid grid-cols-2 gap-2 text-foreground-de-emp">
                      <code>font-m-size</code>
                      <code className="text-primary">→ text-m</code>
                    </div>
                    <div className="grid grid-cols-2 gap-2 text-foreground-de-emp">
                      <code>font-s-size</code>
                      <code className="text-primary">→ text-s</code>
                    </div>
                  </div>
                </div>
              </div>

              {/* Semantic Colors */}
              <div>
                <h4 className="text-m text-foreground-emp mb-2">3. Semantic Color Utilities</h4>
                <p className="text-s text-foreground-de-emp mb-2">
                  Text colors use semantic tokens that adapt to theme:
                </p>
                <div className="bg-surface p-3 rounded text-xs space-y-2">
                  <div className="flex justify-between items-center">
                    <code className="text-primary">text-foreground-emp</code>
                    <span className="text-foreground-emp">Emphasized text</span>
                  </div>
                  <div className="flex justify-between items-center">
                    <code className="text-primary">text-foreground</code>
                    <span className="text-foreground">Default text</span>
                  </div>
                  <div className="flex justify-between items-center">
                    <code className="text-primary">text-foreground-de-emp</code>
                    <span className="text-foreground-de-emp">De-emphasized text</span>
                  </div>
                </div>
              </div>

              {/* Key Insight */}
              <div className="bg-success p-4 rounded border-l-4 border-success-600">
                <p className="text-s text-foreground-emp mb-1"><strong>Why This Matters</strong></p>
                <p className="text-s text-foreground-de-emp">
                  Typography shortcuts ensure consistency across UiPath products. All font sizes,
                  line heights, and weights come from Apollo Design System, not Tailwind defaults.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  ),
};

// ============================================================================
// Story 4: Buttons - Deep Dive
// ============================================================================

export const Story4_Buttons: Story = {
  name: '4. Buttons - Component Deep Dive',
  render: () => {
    const [showSuccess, setShowSuccess] = React.useState(false);

    const handleSubmit = (e: React.FormEvent) => {
      e.preventDefault();
      setShowSuccess(true);
      setTimeout(() => setShowSuccess(false), 3000);
    };

    return (
      <div className="bg-surface min-h-screen p-8">
        <ThemeSwitcher />

        <div className="max-w-4xl mx-auto">
          <div className="text-foreground mb-6">
            <h2 className="text-h2 text-foreground-emp mb-2">Understanding Buttons</h2>
            <p className="text-m text-foreground-de-emp">
              Deep dive into button utilities, color mapping, and hover states.
            </p>
          </div>

          <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
            {/* Left: Demo */}
            <div>
              <h3 className="text-h3 text-foreground-emp mb-4">Demo</h3>

              {/* Card with Form */}
              <div className="card card-elevated p-6">
                <div className="mb-6">
                  <h2 className="text-foreground-emp text-h3 mb-1">
                    Create Account
                  </h2>
                  <p className="text-foreground-de-emp text-s">
                    Join thousands of users worldwide
                  </p>
                </div>

                <form onSubmit={handleSubmit}>
                  <div className="mb-4">
                    <label className="block text-foreground-emp text-s mb-1">
                      Email
                    </label>
                    <input
                      type="email"
                      className="input"
                      placeholder="you@example.com"
                      required
                    />
                  </div>

                  <button type="submit" className="btn btn-primary-colors w-full">
                    Create Account
                  </button>
                </form>

                {showSuccess && (
                  <div className="bg-success border-l-4 border-success-600 p-4 mt-4 rounded">
                    <div className="flex items-start gap-3">
                      <svg className="icon-md text-success flex-shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <circle cx="12" cy="12" r="10" strokeWidth="2"/>
                        <path d="M9 12l2 2 4-4" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                      </svg>
                      <div>
                        <p className="text-s text-foreground-emp font-semibold">Account created!</p>
                        <p className="text-s text-foreground-de-emp">Welcome to the platform.</p>
                      </div>
                    </div>
                  </div>
                )}
              </div>

              {/* Button Variants */}
              <div className="bg-surface-raised p-6 rounded mt-4">
                <h4 className="text-m text-foreground-emp mb-3">Button States</h4>
                <div className="space-y-2">
                  <button className="btn btn-primary-colors w-full">Primary Button</button>
                  <button className="btn w-full">Default Button</button>
                  <button className="btn btn-small btn-primary-colors">Small Button</button>
                  <button className="btn" disabled>Disabled Button</button>
                </div>
              </div>
            </div>

            {/* Right: Explanation */}
            <div className="bg-surface-raised p-6 rounded">
              <h3 className="text-h3 text-foreground-emp mb-4">How It Works</h3>

              <div className="space-y-6 text-foreground">
                {/* Button Base */}
                <div>
                  <h4 className="text-m text-foreground-emp mb-2">1. The <code className="text-primary">btn</code> Utility</h4>
                  <p className="text-s text-foreground-de-emp mb-2">
                    Like <code className="text-primary">card</code>, <code className="text-primary">btn</code> is
                    a composable utility that sets base styles:
                  </p>
                  <pre className="bg-surface p-3 rounded text-xs overflow-x-auto">
{`@utility btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 40px;
  padding-inline: 16px;
  font-weight: 600;
  font-size: 0.875rem;
  border-radius: 3px;
  transition: 200ms ease-in-out;

  &:focus-visible {
    outline: 2px solid var(--color-focus-indicator);
  }

  &:disabled {
    opacity: 0.38;
    cursor: not-allowed;
  }
}`}</pre>
                </div>

                {/* Primary Colors */}
                <div>
                  <h4 className="text-m text-foreground-emp mb-2">2. <code className="text-primary">btn-primary-colors</code> Mapping</h4>
                  <p className="text-s text-foreground-de-emp mb-3">
                    Color utilities reference Apollo semantic tokens:
                  </p>

                  <div className="bg-surface p-4 rounded space-y-3 text-xs">
                    <div>
                      <div className="text-primary font-semibold mb-2">Token → Name → Class</div>

                      <div className="space-y-2">
                        <div className="border-l-2 border-primary pl-3">
                          <div className="text-foreground-emp">Background</div>
                          <div className="text-foreground-de-emp">
                            <code>--color-primary</code> → <code>primary</code> → <code className="text-primary">bg-primary</code>
                          </div>
                        </div>

                        <div className="border-l-2 border-primary pl-3">
                          <div className="text-foreground-emp">Text</div>
                          <div className="text-foreground-de-emp">
                            <code>--color-primary-foreground-inverse</code> → <code>primary-inverse</code> → <code className="text-primary">text-primary-inverse</code>
                          </div>
                        </div>

                        <div className="border-l-2 border-primary pl-3">
                          <div className="text-foreground-emp">Hover Background</div>
                          <div className="text-foreground-de-emp">
                            <code>--color-primary-hover</code> → <code>primary-hover</code> → <code className="text-primary">hover:bg-primary-hover</code>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div className="pt-3 border-t border-border">
                      <div className="text-primary font-semibold mb-2">Actual Implementation:</div>
                      <pre className="bg-surface-raised p-2 rounded overflow-x-auto">
{`@utility btn-primary-colors {
  background: var(--color-primary);
  color: var(--color-primary-foreground-inverse);

  &:hover {
    background: var(--color-primary-hover);
  }
}`}</pre>
                    </div>
                  </div>
                </div>

                {/* Hover State Breakdown */}
                <div>
                  <h4 className="text-m text-foreground-emp mb-2">3. Breaking Down <code className="text-primary">hover:text-foreground-emp</code></h4>
                  <p className="text-s text-foreground-de-emp mb-3">
                    Let's dissect this Tailwind + Apollo combination:
                  </p>

                  <div className="bg-surface p-4 rounded space-y-3 text-xs">
                    <div className="flex items-start gap-3">
                      <div className="bg-primary text-primary-inverse px-2 py-1 rounded font-semibold">
                        hover:
                      </div>
                      <div>
                        <div className="text-foreground-emp mb-1">Tailwind Feature</div>
                        <div className="text-foreground-de-emp">
                          Applies styles on <code>:hover</code> pseudo-class.
                          This is Tailwind's variant system.
                        </div>
                      </div>
                    </div>

                    <div className="flex items-start gap-3">
                      <div className="bg-primary text-primary-inverse px-2 py-1 rounded font-semibold">
                        text-
                      </div>
                      <div>
                        <div className="text-foreground-emp mb-1">Tailwind Utility Prefix</div>
                        <div className="text-foreground-de-emp">
                          Indicates we're setting the <code>color</code> CSS property.
                        </div>
                      </div>
                    </div>

                    <div className="flex items-start gap-3">
                      <div className="bg-primary text-primary-inverse px-2 py-1 rounded font-semibold">
                        foreground-emp
                      </div>
                      <div>
                        <div className="text-foreground-emp mb-1">Apollo Semantic Token</div>
                        <div className="text-foreground-de-emp">
                          Maps to <code>var(--color-foreground-emp)</code> which resolves differently per theme.
                        </div>
                      </div>
                    </div>

                    <div className="pt-3 border-t border-border">
                      <div className="text-primary font-semibold mb-2">Final CSS Generated:</div>
                      <pre className="bg-surface-raised p-2 rounded overflow-x-auto">
{`.hover\\:text-foreground-emp:hover {
  color: var(--color-foreground-emp);
}`}</pre>
                    </div>
                  </div>
                </div>

                {/* Key Insight */}
                <div className="bg-warning p-4 rounded border-l-4 border-warning-600">
                  <p className="text-s text-foreground-emp mb-1"><strong>Powerful Combination</strong></p>
                  <p className="text-s text-foreground-de-emp">
                    You get Tailwind's <strong>variant system</strong> (hover, focus, active) combined with
                    Apollo's <strong>semantic tokens</strong> (foreground-emp, primary, success). The colors
                    adapt to theme changes automatically!
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    );
  },
};

// ============================================================================
// Story 5: Form Inputs
// ============================================================================

export const Story5_FormInputs: Story = {
  name: '5. Form Inputs - Validation States',
  render: () => {
    const [email, setEmail] = React.useState('');
    const [isValid, setIsValid] = React.useState<boolean | null>(null);
    const [showPassword, setShowPassword] = React.useState(false);

    const validateEmail = (value: string) => {
      const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      setIsValid(regex.test(value));
    };

    const handleEmailChange = (e: React.ChangeEvent<HTMLInputElement>) => {
      const value = e.target.value;
      setEmail(value);
      if (value) validateEmail(value);
      else setIsValid(null);
    };

    return (
      <div className="bg-surface min-h-screen p-8">
        <ThemeSwitcher />

        <div className="max-w-4xl mx-auto">
          <div className="text-foreground mb-6">
            <h2 className="text-h2 text-foreground-emp mb-2">Understanding Form Inputs</h2>
            <p className="text-m text-foreground-de-emp">
              Learn about input utilities, validation states, and combining Apollo Wind with JavaScript.
            </p>
          </div>

          <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
            {/* Left: Demo */}
            <div>
              <h3 className="text-h3 text-foreground-emp mb-4">Demo</h3>

              <div className="card card-elevated p-6">
                {/* Full Name Input */}
                <div className="mb-4">
                  <label className="block text-foreground-emp text-s mb-1" htmlFor="form-fullName">
                    Full Name
                  </label>
                  <div className="relative">
                    <svg className="icon-sm text-foreground-de-emp absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none" viewBox="0 0 24 24" fill="currentColor">
                      <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                    </svg>
                    <input
                      type="text"
                      id="form-fullName"
                      className="input pl-10"
                      placeholder="Enter your full name"
                    />
                  </div>
                </div>

                {/* Email with Validation */}
                <div className="mb-4">
                  <label className="block text-foreground-emp text-s mb-1" htmlFor="form-email">
                    Email
                  </label>
                  <div className="relative">
                    <svg className="icon-sm text-foreground-de-emp absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                      <path d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" strokeWidth="2"/>
                    </svg>
                    <input
                      type="email"
                      id="form-email"
                      className={`input pl-10 pr-10 ${isValid === true ? 'input-success' : isValid === false ? 'input-error' : ''}`}
                      placeholder="Enter your email"
                      value={email}
                      onChange={handleEmailChange}
                    />
                    {isValid === true && (
                      <svg className="icon-sm text-success absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M5 13l4 4L19 7" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                      </svg>
                    )}
                    {isValid === false && (
                      <svg className="icon-sm text-error absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <circle cx="12" cy="12" r="10" strokeWidth="2"/>
                        <path d="M12 8v4M12 16h.01" strokeWidth="2" strokeLinecap="round"/>
                      </svg>
                    )}
                  </div>
                  {isValid === true && (
                    <p className="text-success text-xs mt-1">✓ Email is valid</p>
                  )}
                  {isValid === false && (
                    <p className="text-error text-xs mt-1">✗ Please enter a valid email</p>
                  )}
                </div>

                {/* Password Toggle */}
                <div className="mb-4">
                  <label className="block text-foreground-emp text-s mb-1" htmlFor="form-password">
                    Password
                  </label>
                  <div className="relative">
                    <svg className="icon-sm text-foreground-de-emp absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                      <rect x="3" y="11" width="18" height="11" rx="2" ry="2" strokeWidth="2"/>
                      <path d="M7 11V7a5 5 0 0110 0v4" strokeWidth="2"/>
                    </svg>
                    <input
                      type={showPassword ? 'text' : 'password'}
                      id="form-password"
                      className="input pl-10 pr-10"
                      placeholder="Enter your password"
                      defaultValue="supersecret123"
                    />
                    <button
                      type="button"
                      className="btn btn-small text-foreground-de-emp hover:text-foreground-emp absolute right-2 top-1/2 -translate-y-1/2"
                      onClick={() => setShowPassword(!showPassword)}
                    >
                      <svg className="icon-sm" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        {showPassword ? (
                          <>
                            <path d="M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94M9.9 4.24A9.12 9.12 0 0112 4c7 0 11 8 11 8a18.5 18.5 0 01-2.16 3.19" strokeWidth="2"/>
                            <path d="M1 1l22 22M14.12 14.12a3 3 0 01-4.24-4.24" strokeWidth="2"/>
                          </>
                        ) : (
                          <>
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" strokeWidth="2"/>
                            <circle cx="12" cy="12" r="3" strokeWidth="2"/>
                          </>
                        )}
                      </svg>
                    </button>
                  </div>
                  <p className="text-foreground-de-emp text-xs mt-1">
                    Must be at least 8 characters
                  </p>
                </div>
              </div>
            </div>

            {/* Right: Explanation */}
            <div className="bg-surface-raised p-6 rounded">
              <h3 className="text-h3 text-foreground-emp mb-4">How It Works</h3>

              <div className="space-y-6 text-foreground">
                {/* Input Utility */}
                <div>
                  <h4 className="text-m text-foreground-emp mb-2">1. The <code className="text-primary">input</code> Utility</h4>
                  <p className="text-s text-foreground-de-emp mb-2">
                    Complete input styling in one class:
                  </p>
                  <pre className="bg-surface p-3 rounded text-xs overflow-x-auto">
{`@utility input {
  width: 100%;
  height: 40px;
  padding: 8px 12px;
  color: var(--color-foreground);
  background: var(--color-background);
  border: 1px solid var(--color-foreground-de-emp);
  border-radius: 3px;
  transition: border-color 200ms;

  &:focus {
    outline: none;
    border-color: var(--color-focus-indicator);
    border-width: 2px;
  }
}`}</pre>
                </div>

                {/* Validation States */}
                <div>
                  <h4 className="text-m text-foreground-emp mb-2">2. Validation State Utilities</h4>
                  <p className="text-s text-foreground-de-emp mb-3">
                    <code className="text-primary">input-success</code> and <code className="text-primary">input-error</code>
                    modify the border color:
                  </p>

                  <div className="bg-surface p-4 rounded space-y-3 text-xs">
                    <div>
                      <div className="text-success font-semibold mb-1">Success State:</div>
                      <pre className="bg-surface-raised p-2 rounded overflow-x-auto">
{`@utility input-success {
  border-color: var(--color-success-icon);
}`}</pre>
                      <div className="text-foreground-de-emp mt-2">
                        Token: <code>--color-success-icon</code> → Semantic color that adapts to theme
                      </div>
                    </div>

                    <div>
                      <div className="text-error font-semibold mb-1">Error State:</div>
                      <pre className="bg-surface-raised p-2 rounded overflow-x-auto">
{`@utility input-error {
  border-color: var(--color-error-icon);
}`}</pre>
                      <div className="text-foreground-de-emp mt-2">
                        Token: <code>--color-error-icon</code> → Semantic color that adapts to theme
                      </div>
                    </div>
                  </div>
                </div>

                {/* JavaScript Integration */}
                <div>
                  <h4 className="text-m text-foreground-emp mb-2">3. Working with JavaScript</h4>
                  <p className="text-s text-foreground-de-emp mb-3">
                    Apollo Wind utilities work seamlessly with dynamic class names:
                  </p>

                  <div className="bg-surface p-4 rounded text-xs">
                    <div className="text-primary font-semibold mb-2">Email Validation Example:</div>
                    <pre className="bg-surface-raised p-3 rounded overflow-x-auto">
{`const [isValid, setIsValid] = useState(null);

<input
  className={\`input \${
    isValid === true ? 'input-success' :
    isValid === false ? 'input-error' : ''
  }\`}
  onChange={(e) => validateEmail(e.target.value)}
/>`}</pre>
                  </div>

                  <div className="bg-surface p-4 rounded text-xs mt-3">
                    <div className="text-primary font-semibold mb-2">Password Toggle Example:</div>
                    <pre className="bg-surface-raised p-3 rounded overflow-x-auto">
{`const [show, setShow] = useState(false);

<input type={show ? 'text' : 'password'} />
<button
  className="btn hover:text-foreground-emp"
  onClick={() => setShow(!show)}
>
  Toggle
</button>`}</pre>
                  </div>
                </div>

                {/* Key Insight */}
                <div className="bg-info p-4 rounded border-l-4 border-info-600">
                  <p className="text-s text-foreground-emp mb-1"><strong>Composability</strong></p>
                  <p className="text-s text-foreground-de-emp">
                    Apollo Wind utilities are designed to work with JavaScript frameworks.
                    Base styles (<code className="text-primary">input</code>) + state modifiers
                    (<code className="text-primary">input-success</code>) + layout utilities
                    (<code className="text-primary">pl-10</code>) compose beautifully!
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    );
  },
};

// ============================================================================
// Story 6: Animations & Status Colors
// ============================================================================

export const Story6_AnimationsAndStatus: Story = {
  name: '6. Animations & Status Colors',
  render: () => {
    const [isLoading, setIsLoading] = React.useState(false);
    const [showSuccess, setShowSuccess] = React.useState(false);

    const handleSubmit = () => {
      setIsLoading(true);
      setShowSuccess(false);
      setTimeout(() => {
        setIsLoading(false);
        setShowSuccess(true);
        setTimeout(() => setShowSuccess(false), 5000);
      }, 2000);
    };

    return (
      <div className="bg-surface min-h-screen p-8">
        <ThemeSwitcher />

        <div className="max-w-4xl mx-auto">
          <div className="text-foreground mb-6">
            <h2 className="text-h2 text-foreground-emp mb-2">Animations & Status Colors</h2>
            <p className="text-m text-foreground-de-emp">
              Learn how Apollo Wind supports animations and status feedback.
            </p>
          </div>

          <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
            {/* Left: Demo */}
            <div>
              <h3 className="text-h3 text-foreground-emp mb-4">Demo</h3>

              <div className="card card-elevated p-6">
                <h3 className="text-h3 text-foreground-emp mb-4">Submit Form</h3>

                <button
                  onClick={handleSubmit}
                  disabled={isLoading}
                  className="btn btn-primary-colors w-full"
                >
                  {isLoading && (
                    <svg className="icon-sm mr-2 animate-spin" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                      <circle cx="12" cy="12" r="10" strokeWidth="2" strokeDasharray="63" strokeDashoffset="40"/>
                    </svg>
                  )}
                  {isLoading ? 'Creating Account...' : 'Create Account'}
                </button>

                {showSuccess && (
                  <div className="bg-success border-l-4 border-success-600 p-4 mt-4 rounded">
                    <div className="flex items-start gap-3">
                      <svg className="icon-md text-success flex-shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <circle cx="12" cy="12" r="10" strokeWidth="2"/>
                        <path d="M9 12l2 2 4-4" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                      </svg>
                      <div>
                        <p className="text-s text-foreground-emp font-semibold">Success!</p>
                        <p className="text-s text-foreground-de-emp">Your account has been created.</p>
                      </div>
                    </div>
                  </div>
                )}
              </div>

              {/* Status Examples */}
              <div className="space-y-4 mt-4">
                <div className="bg-success border-l-4 border-success-600 p-4 rounded">
                  <div className="flex items-center gap-2">
                    <svg className="icon-sm text-success" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                      <circle cx="12" cy="12" r="10" strokeWidth="2"/>
                      <path d="M9 12l2 2 4-4" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
                    </svg>
                    <span className="text-s text-foreground-emp">Success message</span>
                  </div>
                </div>

                <div className="bg-error border-l-4 border-error-600 p-4 rounded">
                  <div className="flex items-center gap-2">
                    <svg className="icon-sm text-error" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                      <circle cx="12" cy="12" r="10" strokeWidth="2"/>
                      <path d="M12 8v4M12 16h.01" strokeWidth="2" strokeLinecap="round"/>
                    </svg>
                    <span className="text-s text-foreground-emp">Error message</span>
                  </div>
                </div>

                <div className="bg-warning border-l-4 border-warning-600 p-4 rounded">
                  <div className="flex items-center gap-2">
                    <svg className="icon-sm text-warning" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                      <path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z" strokeWidth="2"/>
                      <path d="M12 9v4M12 17h.01" strokeWidth="2" strokeLinecap="round"/>
                    </svg>
                    <span className="text-s text-foreground-emp">Warning message</span>
                  </div>
                </div>

                <div className="bg-info border-l-4 border-info-600 p-4 rounded">
                  <div className="flex items-center gap-2">
                    <svg className="icon-sm text-info" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                      <circle cx="12" cy="12" r="10" strokeWidth="2"/>
                      <path d="M12 16v-4M12 8h.01" strokeWidth="2" strokeLinecap="round"/>
                    </svg>
                    <span className="text-s text-foreground-emp">Info message</span>
                  </div>
                </div>
              </div>
            </div>

            {/* Right: Explanation */}
            <div className="bg-surface-raised p-6 rounded">
              <h3 className="text-h3 text-foreground-emp mb-4">How It Works</h3>

              <div className="space-y-6 text-foreground">
                {/* Animate Spin */}
                <div>
                  <h4 className="text-m text-foreground-emp mb-2">1. <code className="text-primary">animate-spin</code></h4>
                  <p className="text-s text-foreground-de-emp mb-3">
                    This is a Tailwind utility, but uses Apollo Wind's custom keyframes:
                  </p>

                  <div className="bg-surface p-4 rounded space-y-3 text-xs">
                    <div>
                      <div className="text-primary font-semibold mb-1">Apollo Wind Keyframes:</div>
                      <pre className="bg-surface-raised p-2 rounded overflow-x-auto">
{`/* From components.css */
@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}`}</pre>
                    </div>

                    <div>
                      <div className="text-primary font-semibold mb-1">Tailwind Utility Uses It:</div>
                      <pre className="bg-surface-raised p-2 rounded overflow-x-auto">
{`.animate-spin {
  animation: spin 1s linear infinite;
}`}</pre>
                    </div>

                    <div className="pt-3 border-t border-border">
                      <p className="text-foreground-de-emp">
                        <strong>Key Point:</strong> Tailwind's <code className="text-primary">animate-spin</code> utility
                        works out of the box because Apollo Wind provides the <code>spin</code> keyframes definition!
                      </p>
                    </div>
                  </div>
                </div>

                {/* Other Animations */}
                <div>
                  <h4 className="text-m text-foreground-emp mb-2">2. Other Animations Supported</h4>
                  <p className="text-s text-foreground-de-emp mb-2">
                    Apollo Wind provides several @keyframes animations:
                  </p>
                  <div className="bg-surface p-3 rounded text-xs space-y-2">
                    <div className="flex justify-between">
                      <code className="text-primary">@keyframes spin</code>
                      <span className="text-foreground-de-emp">Rotation animation</span>
                    </div>
                    <div className="flex justify-between">
                      <code className="text-primary">@keyframes pulse</code>
                      <span className="text-foreground-de-emp">Opacity pulse</span>
                    </div>
                    <div className="flex justify-between">
                      <code className="text-primary">@keyframes slideInRight</code>
                      <span className="text-foreground-de-emp">Slide from right</span>
                    </div>
                    <div className="flex justify-between">
                      <code className="text-primary">@keyframes fadeIn</code>
                      <span className="text-foreground-de-emp">Fade in opacity</span>
                    </div>
                  </div>
                </div>

                {/* Status Colors */}
                <div>
                  <h4 className="text-m text-foreground-emp mb-2">3. Status Color Utilities</h4>
                  <p className="text-s text-foreground-de-emp mb-3">
                    Apollo Wind provides semantic status utilities:
                  </p>

                  <div className="bg-surface p-4 rounded space-y-3 text-xs">
                    <div>
                      <div className="text-success font-semibold mb-1">Success:</div>
                      <div className="grid grid-cols-2 gap-2 text-foreground-de-emp">
                        <code className="text-primary">bg-success</code>
                        <code>var(--color-success-background)</code>
                      </div>
                      <div className="grid grid-cols-2 gap-2 text-foreground-de-emp">
                        <code className="text-primary">text-success</code>
                        <code>var(--color-success-text)</code>
                      </div>
                      <div className="grid grid-cols-2 gap-2 text-foreground-de-emp">
                        <code className="text-primary">border-success-600</code>
                        <code>var(--color-success-600)</code>
                      </div>
                    </div>

                    <div>
                      <div className="text-error font-semibold mb-1">Error / Warning / Info:</div>
                      <p className="text-foreground-de-emp">
                        Follow the same pattern:<br/>
                        <code className="text-primary">bg-error</code>, <code className="text-primary">text-error</code>, <code className="text-primary">border-error-600</code><br/>
                        <code className="text-primary">bg-warning</code>, <code className="text-primary">text-warning</code>, <code className="text-primary">border-warning-600</code><br/>
                        <code className="text-primary">bg-info</code>, <code className="text-primary">text-info</code>, <code className="text-primary">border-info-600</code>
                      </p>
                    </div>
                  </div>
                </div>

                {/* Key Insight */}
                <div className="bg-success p-4 rounded border-l-4 border-success-600">
                  <p className="text-s text-foreground-emp mb-1"><strong>Best Practice</strong></p>
                  <p className="text-s text-foreground-de-emp">
                    Status colors use semantic Apollo tokens that adapt to theme. Combine with
                    border accents (<code className="text-primary">border-l-4</code>) and
                    proper spacing for accessible, theme-aware feedback messages.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    );
  },
};

